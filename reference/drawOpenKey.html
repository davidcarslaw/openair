<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Scale key handling for openair — drawOpenKey • openair</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Scale key handling for openair — drawOpenKey"><meta name="description" content="General function for producing scale keys for other openair functions.  The
function is a crude modification of the draw.colorkey function developed by
Deepayan Sarkar as part of the lattice package, and allows additional key
labelling to added, and provides some additional control of the appearance
and scaling."><meta property="og:description" content="General function for producing scale keys for other openair functions.  The
function is a crude modification of the draw.colorkey function developed by
Deepayan Sarkar as part of the lattice package, and allows additional key
labelling to added, and provides some additional control of the appearance
and scaling."><meta property="og:image" content="https://davidcarslaw.github.io/openair/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">openair</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.18.2.9004</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/openair.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://bookdown.org/david_carslaw/openair/">Book (external)</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/davidcarslaw/openair/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Scale key handling for openair</h1>
      <small class="dont-index">Source: <a href="https://github.com/davidcarslaw/openair/blob/master/R/drawOpenKey.R" class="external-link"><code>R/drawOpenKey.R</code></a></small>
      <div class="d-none name"><code>drawOpenKey.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>General function for producing scale keys for other openair functions.  The
function is a crude modification of the draw.colorkey function developed by
Deepayan Sarkar as part of the lattice package, and allows additional key
labelling to added, and provides some additional control of the appearance
and scaling.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">drawOpenKey</span><span class="op">(</span><span class="va">key</span>, draw <span class="op">=</span> <span class="cn">FALSE</span>, vp <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-key">key<a class="anchor" aria-label="anchor" href="#arg-key"></a></dt>
<dd><p>List defining the scale key structure to be produced. Most
options are identical to original <code>draw.colorkey</code> function.</p>
<p>Original <code>draw.colorkey</code> options:</p>
<p><code>space</code> location of the scale key ("left", "right", "top" or
"bottom").  Defaults to "right".</p>
<p><code>col</code> vector of colours, used in scale key.</p>
<p><code>at</code> numeric vector specifying where the colors change. Must be of
length 1 more than the col vector.</p>
<p><code>labels</code> a character vector for labelling the at values, or more
commonly, a list describing characteristics of the labels. This list may
include components <code>labels</code>, <code>at</code>, <code>cex</code>, <code>col</code>,
<code>rot</code>, <code>font</code>, <code>fontface</code> and <code>fontfamily</code>.</p>
<p><code>tick.number</code> approximate number of ticks.</p>
<p><code>width</code> width of the key.</p>
<p><code>height</code> height of key.</p>
<p>Note: <code>width</code> and <code>height</code> refer to the key dimensions.
<code>height</code> is the length of the key along the plot axis it is
positioned against, and <code>width</code> is the length perpendicular to that.</p>
<p>Additional options include:</p>
<p><code>header</code> a character vector of extra text to be added above the key,
or a list describing some characteristics of the <code>header</code>. This list
may include components <code>header</code>, the character vector of header
labels, <code>tweaks</code>, a list of local controls, e.g. 'gap' and 'balance'
for spacing relative to scale and footer, respectively, <code>auto.text</code>,
<code>TRUE/FALSE</code> option to apply <code>quickText</code>, and <code>slot</code>, a
numeric vector setting the size of the text boxes <code>header</code> text is
placed in.</p>
<p><code>footer</code> as in <code>header</code> but for labels below the scale key.</p>
<p>Notes: <code>header</code> and <code>footer</code> formatting can not be set locally,
but instead are matched to those set in <code>labels</code>. <code>drawOpenKey</code>
allows for up to six additional labels (three above and three below scale
key). Any additional text is ignored.</p>
<p><code>tweak, auto.text, slot</code> as in <code>header</code> and <code>footer</code> but
sets all options uniformly. This also overwrites anything in
<code>header</code> and/or <code>footer</code>.</p>
<p><code>fit</code> the fit method to be applied to the header, scale key and footer
when placing the scale key left or right of the plot. Options include:
'all', 'soft' and 'scale'.  The default 'all' fits header, key and footer
into <code>height</code> range. The alternative 'scale' fits only the key
within <code>height</code>. (This means that keys keep the same proportions
relative to the main plot regardless of positioning but that header and
footer may exceed plot dimensions if <code>height</code> and/or <code>slots</code>
are too large.</p>
<p><code>plot.style</code> a character vector of key plotting style instructions:
Options currently include: 'paddle', 'ticks' and 'border'. 'paddle'
applies the incremental paddle layout used by <code>winRose</code>. 'ticks'
places ticks between the labels scale key. 'border' places a border about
the scale key. Any combination of these may be used but if none set,
scale key defaults to <code>c("ticks", "border")</code> for most plotting
operations or <code>c("paddle")</code> for <code>windRose</code>.</p></dd>


<dt id="arg-draw">draw<a class="anchor" aria-label="anchor" href="#arg-draw"></a></dt>
<dd><p>Option to return the key object or plot it directly.  The
default, FALSE, should always be used within openair calls.</p></dd>


<dt id="arg-vp">vp<a class="anchor" aria-label="anchor" href="#arg-vp"></a></dt>
<dd><p>View port to be used when plotting key. The default, NULL, should
always be used within openair calls.</p>
<p>(Note: <code>drawOpenKey</code> is a crude modification of
<code><a href="https://rdrr.io/pkg/lattice/man/draw.colorkey.html" class="external-link">lattice::draw.colorkey</a></code>, that provides labelling options for
<code>openair</code> plot scale keys. Some aspects of the function are in
development and may to subject to change. Therefore, it is recommended
that you use parent <code>openair</code> function controls, e.g.
<code>key.position</code>, <code>key.header</code>, <code>key.footer</code> options, where
possible.  <code>drawOpenKey</code> may obviously be used in other plots but it
is recommended that <code>draw.colorkey</code> itself be used wherever this
type of additional scale labelling is not required.)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The function is a modification of <code><a href="https://rdrr.io/pkg/lattice/man/draw.colorkey.html" class="external-link">lattice::draw.colorkey</a></code> and
returns a scale key using a similar mechanism to that used in in the
original function as developed by Deepayan Sarkar.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>drawOpenKey</code> function produces scale keys for other openair
functions.</p>
<p>Most <code>drawOpenKey</code> options are identical to those of
<code><a href="https://rdrr.io/pkg/lattice/man/draw.colorkey.html" class="external-link">lattice::draw.colorkey</a></code>.  For example, scale key size and position
are controlled via <code>height</code>, <code>width</code> and <code>space</code>. Likewise,
the axis labelling can be set in and formatted by <code>labels</code>. See
<code>draw.colorkey</code> for further details.</p>
<p>Additional scale labelling may be added above and below the scale using
<code>header</code> and <code>footer</code> options within <code>key</code>. As in other
<code>openair</code> functions, automatic text formatting can be enabled via
<code>auto.key</code>.</p>
<p>(Note: Currently, the formatting of <code>header</code> and <code>footer</code> text
are fixed to the same style as <code>labels</code> (the scale axis) and cannot be
defined locally.)</p>
<p>The relationship between <code>header</code>, <code>footer</code> and the scale key
itself can be controlled using <code>fit</code> options. These can be set in
<code>key$fit</code> to apply uniform control or individually in
<code>key$header$fit</code> and/or <code>key$footer$fit</code> to control locally.</p>
<p>The appearance of the scale can be controlled using <code>plot.style</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>We gratefully acknowledge the considerable help and advice of
Deepayan Sarkar.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Deepayan Sarkar (2010). lattice: Lattice Graphics. R package
version 0.18-5.  http://r-forge.r-project.org/projects/lattice/</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Functions using <code>drawOpenKey</code> currently include
<code><a href="windRose.html">windRose</a></code>, <code><a href="pollutionRose.html">pollutionRose</a></code>.</p>
<p>For details of the original function, see <code>draw.colorkey</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p><code>draw.colorkey</code> is part of the <code>lattice</code> package,
developed by Deepayan Sarkar.</p>
<p>Additional modifications by Karl Ropkins.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##########</span></span></span>
<span class="r-in"><span><span class="co">#example 1</span></span></span>
<span class="r-in"><span><span class="co">##########</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#paddle style scale key used by windRose</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="windRose.html">windRose</a></span><span class="op">(</span><span class="va">mydata</span>,<span class="op">)</span></span></span>
<span class="r-plt img"><img src="drawOpenKey-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#adding text and changing style and position via key</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#note:</span></span></span>
<span class="r-in"><span><span class="co">#some simple key control also possible directly</span></span></span>
<span class="r-in"><span><span class="co">#For example, below does same as</span></span></span>
<span class="r-in"><span><span class="co">#windRose(mydata, key.position="right")</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="windRose.html">windRose</a></span><span class="op">(</span><span class="va">mydata</span>,</span></span>
<span class="r-in"><span>   key <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>space<span class="op">=</span><span class="st">"right"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="drawOpenKey-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#however:</span></span></span>
<span class="r-in"><span><span class="co">#more detailed control possible working with</span></span></span>
<span class="r-in"><span><span class="co">#key and drawOpenKey. For example,</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="windRose.html">windRose</a></span><span class="op">(</span><span class="va">mydata</span>,</span></span>
<span class="r-in"><span>   key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>header<span class="op">=</span><span class="st">"Title"</span>, footer<span class="op">=</span><span class="st">"wind speed"</span>,</span></span>
<span class="r-in"><span>              plot.style <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ticks"</span>, <span class="st">"border"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>              fit <span class="op">=</span> <span class="st">"all"</span>, height <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>              space <span class="op">=</span> <span class="st">"top"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="drawOpenKey-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Carslaw, Jack Davison, Karl Ropkins.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

