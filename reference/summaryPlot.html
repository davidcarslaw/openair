<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Function to rapidly provide an overview of air quality data — summaryPlot • openair</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Function to rapidly provide an overview of air quality data — summaryPlot"><meta name="description" content="This function provides a quick graphical and numerical summary of data. The
location presence/absence of data are shown, with summary statistics and
plots of variable distributions. summaryPlot() can also provide summaries
of a single pollutant across many sites."><meta property="og:description" content="This function provides a quick graphical and numerical summary of data. The
location presence/absence of data are shown, with summary statistics and
plots of variable distributions. summaryPlot() can also provide summaries
of a single pollutant across many sites."><meta property="og:image" content="https://davidcarslaw.github.io/openair/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">openair</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.18.2.9004</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/openair.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://bookdown.org/david_carslaw/openair/">Book (external)</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/davidcarslaw/openair/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Function to rapidly provide an overview of air quality data</h1>
      <small class="dont-index">Source: <a href="https://github.com/davidcarslaw/openair/blob/master/R/summaryPlot.R" class="external-link"><code>R/summaryPlot.R</code></a></small>
      <div class="d-none name"><code>summaryPlot.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function provides a quick graphical and numerical summary of data. The
location presence/absence of data are shown, with summary statistics and
plots of variable distributions. <code>summaryPlot()</code> can also provide summaries
of a single pollutant across many sites.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">summaryPlot</span><span class="op">(</span></span>
<span>  <span class="va">mydata</span>,</span>
<span>  na.len <span class="op">=</span> <span class="fl">24</span>,</span>
<span>  clip <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  percentile <span class="op">=</span> <span class="fl">0.99</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"histogram"</span>,</span>
<span>  pollutant <span class="op">=</span> <span class="st">"nox"</span>,</span>
<span>  period <span class="op">=</span> <span class="st">"years"</span>,</span>
<span>  avg.time <span class="op">=</span> <span class="st">"day"</span>,</span>
<span>  print.datacap <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  breaks <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  plot.type <span class="op">=</span> <span class="st">"l"</span>,</span>
<span>  col.trend <span class="op">=</span> <span class="st">"darkgoldenrod2"</span>,</span>
<span>  col.data <span class="op">=</span> <span class="st">"lightblue"</span>,</span>
<span>  col.mis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/rgb.html" class="external-link">rgb</a></span><span class="op">(</span><span class="fl">0.65</span>, <span class="fl">0.04</span>, <span class="fl">0.07</span><span class="op">)</span>,</span>
<span>  col.hist <span class="op">=</span> <span class="st">"forestgreen"</span>,</span>
<span>  cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  date.breaks <span class="op">=</span> <span class="fl">7</span>,</span>
<span>  auto.text <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  debug <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-mydata">mydata<a class="anchor" aria-label="anchor" href="#arg-mydata"></a></dt>
<dd><p>A data frame to be summarised. Must contain a <code>date</code> field and
at least one other parameter.</p></dd>


<dt id="arg-na-len">na.len<a class="anchor" aria-label="anchor" href="#arg-na-len"></a></dt>
<dd><p>Missing data are only shown with at least <code>na.len</code>
<em>contiguous</em> missing vales. The purpose of setting <code>na.len</code> is
for clarity: with long time series it is difficult to see where individual
missing hours are. Furthermore, setting <code>na.len = 96</code>, for example would
show where there are at least 4 days of continuous missing data.</p></dd>


<dt id="arg-clip">clip<a class="anchor" aria-label="anchor" href="#arg-clip"></a></dt>
<dd><p>When data contain outliers, the histogram or density plot can
fail to show the distribution of the main body of data. Setting <code>clip = TRUE</code>, will remove the top 1 % of data to yield what is often a better
display of the overall distribution of the data. The amount of clipping can
be set with <code>percentile</code>.</p></dd>


<dt id="arg-percentile">percentile<a class="anchor" aria-label="anchor" href="#arg-percentile"></a></dt>
<dd><p>This is used to clip the data. For example, <code>percentile = 0.99</code> (the default) will remove the top 1 percentile of values i.e. values
greater than the 99th percentile will not be used.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p><code>type</code> is used to determine whether a histogram (the default) or
a density plot is used to show the distribution of the data.</p></dd>


<dt id="arg-pollutant">pollutant<a class="anchor" aria-label="anchor" href="#arg-pollutant"></a></dt>
<dd><p><code>pollutant</code> is used when there is a field <code>site</code> and there
is more than one site in the data frame.</p></dd>


<dt id="arg-period">period<a class="anchor" aria-label="anchor" href="#arg-period"></a></dt>
<dd><p><code>period</code> is either <code>years</code> (the default) or <code>months</code>.
Statistics are calculated depending on the <code>period</code> chosen.</p></dd>


<dt id="arg-avg-time">avg.time<a class="anchor" aria-label="anchor" href="#arg-avg-time"></a></dt>
<dd><p>This defines the time period to average the time series
plots. Can be "sec", "min", "hour", "day" (the default), "week", "month",
"quarter" or "year". For much increased flexibility a number can precede
these options followed by a space. For example, a <code><a href="timeAverage.html">timeAverage()</a></code> of 2
months would be <code>avg.time = "2 month"</code>.</p></dd>


<dt id="arg-print-datacap">print.datacap<a class="anchor" aria-label="anchor" href="#arg-print-datacap"></a></dt>
<dd><p>Should the data capture % be shown for each period?</p></dd>


<dt id="arg-breaks">breaks<a class="anchor" aria-label="anchor" href="#arg-breaks"></a></dt>
<dd><p>Number of histogram bins. Sometime useful but not easy to set a
single value for a range of very different variables.</p></dd>


<dt id="arg-plot-type">plot.type<a class="anchor" aria-label="anchor" href="#arg-plot-type"></a></dt>
<dd><p>The <code>lattice</code> plot type, which is a line (<code>plot.type = "l"</code>)
by default. Another useful option is <code>plot.type = "h"</code>, which draws
vertical lines.</p></dd>


<dt id="arg-col-trend">col.trend<a class="anchor" aria-label="anchor" href="#arg-col-trend"></a></dt>
<dd><p>Colour to be used to show the monthly trend of the data,
shown as a shaded region. Type <code><a href="https://rdrr.io/r/grDevices/colors.html" class="external-link">colors()</a></code> into R to see the full range of
colour names.</p></dd>


<dt id="arg-col-data">col.data<a class="anchor" aria-label="anchor" href="#arg-col-data"></a></dt>
<dd><p>Colour to be used to show the <em>presence</em> of data. Type
<code><a href="https://rdrr.io/r/grDevices/colors.html" class="external-link">colors()</a></code> into R to see the full range of colour names.</p></dd>


<dt id="arg-col-mis">col.mis<a class="anchor" aria-label="anchor" href="#arg-col-mis"></a></dt>
<dd><p>Colour to be used to show missing data.</p></dd>


<dt id="arg-col-hist">col.hist<a class="anchor" aria-label="anchor" href="#arg-col-hist"></a></dt>
<dd><p>Colour for the histogram or density plot.</p></dd>


<dt id="arg-cols">cols<a class="anchor" aria-label="anchor" href="#arg-cols"></a></dt>
<dd><p>Predefined colour scheme, currently only enabled for
<code>"greyscale"</code>.</p></dd>


<dt id="arg-date-breaks">date.breaks<a class="anchor" aria-label="anchor" href="#arg-date-breaks"></a></dt>
<dd><p>Number of major x-axis intervals to use. The function will
try and choose a sensible number of dates/times as well as formatting the
date/time appropriately to the range being considered.  This does not
always work as desired automatically. The user can therefore increase or
decrease the number of intervals by adjusting the value of <code>date.breaks</code> up
or down.</p></dd>


<dt id="arg-auto-text">auto.text<a class="anchor" aria-label="anchor" href="#arg-auto-text"></a></dt>
<dd><p>Either <code>TRUE</code> (default) or <code>FALSE</code>. If <code>TRUE</code> titles and
axis labels will automatically try and format pollutant names and units
properly, e.g., by subscripting the '2' in NO2.</p></dd>


<dt id="arg-plot">plot<a class="anchor" aria-label="anchor" href="#arg-plot"></a></dt>
<dd><p>Should a plot be produced? <code>FALSE</code> can be useful when analysing
data to extract plot components and plotting them in other ways.</p></dd>


<dt id="arg-debug">debug<a class="anchor" aria-label="anchor" href="#arg-debug"></a></dt>
<dd><p>Should data types be printed to the console? <code>TRUE</code> can be
useful for debugging.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Other graphical parameters. Commonly used examples include the
axis and title labelling options (such as <code>xlab</code>, <code>ylab</code> and <code>main</code>), which
are all passed to the plot via <code><a href="quickText.html">quickText()</a></code> to handle routine formatting.
As <code>summaryPlot()</code> has two components, the axis labels may be a vector. For
example, the default case (<code>type = "histogram"</code>) sets y labels equivalent
to <code>ylab = c("", "Percent of Total")</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>summaryPlot()</code> produces two panels of plots: one showing the
presence/absence of data and the other the distributions. The left panel
shows time series and codes the presence or absence of data in different
colours. By stacking the plots one on top of another it is easy to compare
different pollutants/variables. Overall statistics are given for each
variable: mean, maximum, minimum, missing hours (also expressed as a
percentage), median and the 95th percentile. For each year the data capture
rate (expressed as a percentage of hours in that year) is also given.</p>
<p>The right panel shows either a histogram or a density plot depending on the
choice of <code>type</code>. Density plots avoid the issue of arbitrary bin sizes that
can sometimes provide a misleading view of the data distribution. Density
plots are often more appropriate, but their effectiveness will depend on the
data in question.</p>
<p><code>summaryPlot()</code> will only show data that are numeric or integer type. This is
useful for checking that data have been imported properly. For example, if
for some reason a column representing wind speed erroneously had one or more
fields with characters in, the whole column would be either character or
factor type. The absence of a wind speed variable in the <code>summaryPlot()</code> plot
would therefore indicate a problem with the input data. In this particular
case, the user should go back to the source data and remove the characters or
remove them using R functions.</p>
<p>If there is a field <code>site</code>, which would generally mean there is more than one
site, <code>summaryPlot()</code> will provide information on a
<em>single</em> pollutant across all sites, rather than provide details on all
pollutants at a <em>single</em> site. In this case the user should also provide a
name of a pollutant e.g. <code>pollutant = "nox"</code>. If a pollutant is not provided
the first numeric field will automatically be chosen.</p>
<p><strong>It is strongly recommended that the <code>summaryPlot()</code> function is
applied to all new imported data sets to ensure the data are imported as
expected.</strong></p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>David Carslaw</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># do not clip density plot data</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">summaryPlot</span><span class="op">(</span><span class="va">mydata</span>, clip <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># exclude highest 5 % of data etc.</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">summaryPlot</span><span class="op">(</span><span class="va">mydata</span>, percentile <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># show missing data where there are at least 96 contiguous missing</span></span></span>
<span class="r-in"><span><span class="co"># values (4 days)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">summaryPlot</span><span class="op">(</span><span class="va">mydata</span>, na.len <span class="op">=</span> <span class="fl">96</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># show data in green</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">summaryPlot</span><span class="op">(</span><span class="va">mydata</span>, col.data <span class="op">=</span> <span class="st">"green"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># show missing data in yellow</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">summaryPlot</span><span class="op">(</span><span class="va">mydata</span>, col.mis <span class="op">=</span> <span class="st">"yellow"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># show density plot line in black</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">summaryPlot</span><span class="op">(</span><span class="va">mydata</span>, col.dens <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Carslaw, Jack Davison, Karl Ropkins.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

