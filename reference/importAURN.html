<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Functions for importing air pollution data from a range of UK networks
including the Automatic Urban and Rural Network. Files are imported from a
remote server operated by Ricardo that provides air quality data files as R
data objects."><title>Import data from the UK Air Pollution Networks — importAURN • openair</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Import data from the UK Air Pollution Networks — importAURN"><meta property="og:description" content="Functions for importing air pollution data from a range of UK networks
including the Automatic Urban and Rural Network. Files are imported from a
remote server operated by Ricardo that provides air quality data files as R
data objects."><meta property="og:image" content="https://davidcarslaw.github.io/openair/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">openair</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.16.0.9004</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://bookdown.org/david_carslaw/openair/">Book</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/davidcarslaw/openair">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Import data from the UK Air Pollution Networks</h1>
      <small class="dont-index">Source: <a href="https://github.com/davidcarslaw/openair/blob/HEAD/R/importAURN.R" class="external-link"><code>R/importAURN.R</code></a></small>
      <div class="d-none name"><code>importAURN.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Functions for importing air pollution data from a range of UK networks
including the Automatic Urban and Rural Network. Files are imported from a
remote server operated by Ricardo that provides air quality data files as R
data objects.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">importAURN</span><span class="op">(</span></span>
<span>  site <span class="op">=</span> <span class="st">"my1"</span>,</span>
<span>  year <span class="op">=</span> <span class="fl">2009</span>,</span>
<span>  data_type <span class="op">=</span> <span class="st">"hourly"</span>,</span>
<span>  pollutant <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  hc <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  meta <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  meteo <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  ratified <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  to_narrow <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>site</dt>
<dd><p>Site code of the site to import e.g. “my1” is Marylebone
Road. Several sites can be imported with <code>site = c("my1", "nott")</code>
--- to import Marylebone Road and Nottingham for example.</p></dd>


<dt>year</dt>
<dd><p>Year or years to import. To import a sequence of years from 1990
to 2000 use <code>year = 1990:2000</code>. To import several specific years use
<code>year = c(1990, 1995, 2000)</code> for example.</p></dd>


<dt>data_type</dt>
<dd><p>The data type averaging period. These include:</p>
<ul><li><p>"hourly" Default is to return hourly data.</p></li>
<li><p>"daily" Daily average data.</p></li>
<li><p>"monthly" Monthly average
data with data capture information for the whole network.</p></li>
<li><p>"annual" Annual average data with data capture information for the
whole network.</p></li>
<li><p>"15_min" To import 15-minute average SO2
concentrations.</p></li>
<li><p>"8_hour" To import 8-hour rolling mean
concentrations for O3 and CO.</p></li>
<li><p>"24_hour" To import 24-hour rolling
mean concentrations for particulates.</p></li>
<li><p>"daily_max_8" To import maximum daily rolling 8-hour maximum for O3 and CO.</p></li>
<li><p>"daqi" To import Daily
Air Quality Index (DAQI). See
<a href="https://uk-air.defra.gov.uk/air-pollution/daqi?view=more-info&amp;pollutant=ozone#pollutant" class="external-link">here</a>
for more details of how the index is defined.</p></li>
</ul></dd>


<dt>pollutant</dt>
<dd><p>Pollutants to import. If omitted will import all pollutants
from a site. To import only NOx and NO2 for example use <code>pollutant =
  c("nox", "no2")</code>.</p></dd>


<dt>hc</dt>
<dd><p>A few sites have hydrocarbon measurements available and setting
<code>hc = TRUE</code> will ensure hydrocarbon data are imported. The default is
however not to as most users will not be interested in using hydrocarbon
data and the resulting data frames are considerably larger.</p></dd>


<dt>meta</dt>
<dd><p>Should meta data be returned? If <code>TRUE</code> the site type,
latitude and longitude are returned.</p></dd>


<dt>meteo</dt>
<dd><p>Should modelled meteorological data be returned if available.
The default is <code>TRUE</code> and will return wind speed (<code>ws</code>), wind
direction (<code>wd</code>) and ambient temperature (<code>air_temp</code>). The
variables are calculated from using the WRF model run by Ricardo Energy &amp;
Environment and are available for most but not all networks. Setting
<code>meteo = FALSE</code> is useful if you have other meteorological data to use
in preference e.g. from <code>worldmet</code>.</p></dd>


<dt>ratified</dt>
<dd><p>If <code>TRUE</code> columns are returned indicating when each
species was ratified i.e. quality-checked. Available for hourly data only.</p></dd>


<dt>to_narrow</dt>
<dd><p>By default the returned data has a column for each
pollutant/variable. When <code>to_narrow = TRUE</code> the data are stacked into
a narrow format with a column identifying the pollutant name.</p></dd>


<dt>verbose</dt>
<dd><p>Should the function give messages when downloading files?
Default is <code>FALSE</code>.</p></dd>


<dt>progress</dt>
<dd><p>Show a progress bar when many sites/years are being imported?
Defaults to <code>TRUE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Returns a data frame of hourly mean values with date in POSIXct class
and time zone GMT.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This family of functions has been written to make it easy to import data from
across several UK air quality networks. Ricardo have provided .RData files (R
workspaces) of all individual sites and years, as well as up to date meta
data. These files are updated on a daily basis. This approach requires a link
to the Internet to work.</p>
<p>For an up to date list of available sites that can be imported, see
<code><a href="importMeta.html">importMeta()</a></code>.</p>
<p>The site codes and pollutant names can be upper or lower case.</p>
<p>There are several advantages over the web portal approach where .csv files
are downloaded. First, it is quick to select a range of sites, pollutants and
periods (see examples below). Second, storing the data as .RData objects is
very efficient as they are about four times smaller than .csv files --- which
means the data downloads quickly and saves bandwidth. Third, the function
completely avoids any need for data manipulation or setting time formats,
time zones etc. The function also has the advantage that the proper site name
is imported and used in <code>openair</code> functions.</p>
<p>The data are imported by stacking sites on top of one another and will have
field names <code>site</code>, <code>code</code> (the site code) and <code>pollutant</code>.</p>
<p>By default, the function returns hourly average data. However, annual,
monthly, daily and 15 minute data (for SO2) can be returned using the option
<code>data_type</code>. Annual and monthly data provide whole network information
including data capture statistics.</p>
<p>All units are expressed in mass terms for gaseous species (ug/m3 for NO, NO2,
NOx (as NO2), SO2 and hydrocarbons; and mg/m3 for CO). PM10 concentrations
are provided in gravimetric units of ug/m3 or scaled to be comparable with
these units. Over the years a variety of instruments have been used to
measure particulate matter and the technical issues of measuring PM10 are
complex. In recent years the measurements rely on FDMS (Filter Dynamics
Measurement System), which is able to measure the volatile component of PM.
In cases where the FDMS system is in use there will be a separate volatile
component recorded as 'v10' and non-volatile component 'nv10', which is
already included in the absolute PM10 measurement. Prior to the use of FDMS
the measurements used TEOM (Tapered Element Oscillating. Microbalance) and
these concentrations have been multiplied by 1.3 to provide an estimate of
the total mass including the volatile fraction.</p>
<p>Some sites report hourly and daily PM10 and / or PM2.5. When <code>data_type
= "daily"</code> and there are both hourly and 'proper' daily measurements
available, these will be returned as e.g. "pm2.5" and "gr_pm2.5"; the former
corresponding to data based on original hourly measurements and the latter
corresponding to daily gravimetric measurements.</p>
<p>The function returns modelled hourly values of wind speed (<code>ws</code>), wind
direction (<code>wd</code>) and ambient temperature (<code>air_temp</code>) if available
(generally from around 2010). These values are modelled using the WRF model
operated by Ricardo.</p>
<p>The BAM (Beta-Attenuation Monitor) instruments that have been incorporated
into the network throughout its history have been scaled by 1.3 if they have
a heated inlet (to account for loss of volatile particles) and 0.83 if they
do not have a heated inlet. The few TEOM instruments in the network after
2008 have been scaled using VCM (Volatile Correction Model) values to account
for the loss of volatile particles. The object of all these scaling processes
is to provide a reasonable degree of comparison between data sets and with
the reference method and to produce a consistent data record over the
operational period of the network, however there may be some discontinuity in
the time series associated with instrument changes.</p>
<p>No corrections have been made to the PM2.5 data. The volatile component of
FDMS PM2.5 (where available) is shown in the 'v2.5' column.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other import functions: 
<code><a href="importADMS.html">importADMS</a>()</code>,
<code><a href="importAQE.html">importAQE</a>()</code>,
<code><a href="importEurope.html">importEurope</a>()</code>,
<code><a href="importKCL.html">importKCL</a>()</code>,
<code><a href="importLocal.html">importLocal</a>()</code>,
<code><a href="importMeta.html">importMeta</a>()</code>,
<code><a href="importNI.html">importNI</a>()</code>,
<code><a href="importSAQN.html">importSAQN</a>()</code>,
<code><a href="importTraj.html">importTraj</a>()</code>,
<code><a href="importWAQN.html">importWAQN</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>David Carslaw and Trevor Davies</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## import all pollutants from Marylebone Rd from 1990:2009</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="va">mary</span> <span class="op">&lt;-</span> <span class="fu">importAURN</span><span class="op">(</span>site <span class="op">=</span> <span class="st">"my1"</span>, year <span class="op">=</span> <span class="fl">2000</span><span class="op">:</span><span class="fl">2009</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## import nox, no2, o3 from Marylebone Road and Nottingham Centre for 2000</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="va">thedata</span> <span class="op">&lt;-</span> <span class="fu">importAURN</span><span class="op">(</span>site <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"my1"</span>, <span class="st">"nott"</span><span class="op">)</span>, year <span class="op">=</span> <span class="fl">2000</span>,</span></span>
<span class="r-in"><span>pollutant <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"nox"</span>, <span class="st">"no2"</span>, <span class="st">"o3"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Other functions work in the same way e.g. to import Cardiff Centre data</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Import annual data over a period, make it narrow format and return site information</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="va">aq</span> <span class="op">&lt;-</span> <span class="fu">importAURN</span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2010</span><span class="op">:</span><span class="fl">2020</span>, data_type <span class="op">=</span> <span class="st">"annual"</span>, meta <span class="op">=</span> <span class="cn">TRUE</span>, to_narrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="va">cardiff</span> <span class="op">&lt;-</span> <span class="fu"><a href="importWAQN.html">importWAQN</a></span><span class="op">(</span>site <span class="op">=</span> <span class="st">"card"</span>, year <span class="op">=</span> <span class="fl">2020</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by David Carslaw, Jack Davison, Karl Ropkins.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

