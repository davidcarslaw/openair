<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Utility function to split data frames up in various ways for conditioning
plots. Users would generally not be expected to call this function directly.
Widely used by many openair functions usually through the option
type."><title>Function to split data in different ways for conditioning — cutData • openair</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Function to split data in different ways for conditioning — cutData"><meta property="og:description" content="Utility function to split data frames up in various ways for conditioning
plots. Users would generally not be expected to call this function directly.
Widely used by many openair functions usually through the option
type."><meta property="og:image" content="https://davidcarslaw.github.io/openair/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">openair</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.17.0.9007</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://bookdown.org/david_carslaw/openair/">Book</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/davidcarslaw/openair">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Function to split data in different ways for conditioning</h1>
      <small class="dont-index">Source: <a href="https://github.com/davidcarslaw/openair/blob/HEAD/R/cutData.R" class="external-link"><code>R/cutData.R</code></a></small>
      <div class="d-none name"><code>cutData.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Utility function to split data frames up in various ways for conditioning
plots. Users would generally not be expected to call this function directly.
Widely used by many <code>openair</code> functions usually through the option
<code>type</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cutData</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>  hemisphere <span class="op">=</span> <span class="st">"northern"</span>,</span>
<span>  n.levels <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  start.day <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  is.axis <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  local.tz <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  latitude <span class="op">=</span> <span class="fl">51</span>,</span>
<span>  longitude <span class="op">=</span> <span class="op">-</span><span class="fl">0.5</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>A data frame containing a field <code>date</code>.</p></dd>


<dt>type</dt>
<dd><p>A string giving the way in which the data frame should be split.
Pre-defined values are: “default”, “year”, “hour”,
“month”, “season”, “weekday”, “site”,
“weekend”, “monthyear”, “daylight”, “dst”
(daylight saving time).</p>
<p><code>type</code> can also be the name of a numeric or factor. If a numeric
column name is supplied <code>cutData</code> will split the data into four
quantiles. Factors levels will be used to split the data without any
adjustment.</p></dd>


<dt>hemisphere</dt>
<dd><p>Can be <code>"northern"</code> or <code>"southern"</code>, used to
split data into seasons.</p></dd>


<dt>n.levels</dt>
<dd><p>Number of quantiles to split numeric data into.</p></dd>


<dt>start.day</dt>
<dd><p>What day of the week should the <code>type = "weekday"</code>
start on?  The user can change the start day by supplying an integer
between 0 and 6. Sunday = 0, Monday = 1, ... For example to start the
weekday plots on a Saturday, choose <code>start.day = 6</code>.</p></dd>


<dt>is.axis</dt>
<dd><p>A logical (<code>TRUE</code>/<code>FALSE</code>), used to request
shortened cut labels for axes.</p></dd>


<dt>local.tz</dt>
<dd><p>Used for identifying whether a date has daylight savings time
(DST) applied or not. Examples include <code>local.tz = "Europe/London"</code>,
<code>local.tz = "America/New_York"</code> i.e. time zones that assume DST.
<a href="https://en.wikipedia.org/wiki/List_of_zoneinfo_time_zones" class="external-link">https://en.wikipedia.org/wiki/List_of_zoneinfo_time_zones</a> shows time
zones that should be valid for most systems. It is important that the
original data are in GMT (UTC) or a fixed offset from GMT. See
<code>import</code> and the openair manual for information on how to import data
and ensure no DST is applied.</p></dd>


<dt>latitude</dt>
<dd><p>The decimal latitude used in <code>type = "daylight"</code>.</p></dd>


<dt>longitude</dt>
<dd><p>The decimal longitude. Note that locations west of Greenwich
are negative.</p></dd>


<dt>...</dt>
<dd><p>All additional parameters are passed on to next function(s).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Returns a data frame with a column <code>cond</code> that is defined by
<code>type</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This section give a brief description of each of the define levels of
<code>type</code>. Note that all time dependent types require a column <code>date</code>.</p>
<p>"default" does not split the data but will describe the levels as a date
range in the format "day month year".</p>
<p>"year" splits the data by each year.</p>
<p>"month" splits the data by month of the year.</p>
<p>"hour" splits the data by hour of the day.</p>
<p>"monthyear" splits the data by year and month. It differs from month in that
a level is defined for each month of the data set. This is useful sometimes
to show an ordered sequence of months if the data set starts half way through
a year; rather than starting in January.</p>
<p>"weekend" splits the data by weekday and weekend.</p>
<p>"weekday" splits the data by day of the week - ordered to start Monday.</p>
<p>"season" splits data up by season. In the northern hemisphere winter =
December, January, February; spring = March, April, May etc. These
definitions will change of <code>hemisphere = "southern"</code>.</p>
<p>"seasonyear (or "yearseason") will split the data into year-season intervals,
keeping the months of a season together. For example, December 2010 is
considered as part of winter 2011 (with January and February 2011). This
makes it easier to consider contiguous seasons. In contrast, <code>type =
"season"</code> will just split the data into four seasons regardless of the year.</p>
<p>"daylight" splits the data relative to estimated sunrise and sunset to give
either daylight or nighttime. The cut is made by <code>cutDaylight</code> but more
conveniently accessed via <code>cutData</code>, e.g. <code>cutData(mydata, type =
"daylight", latitude = my.latitude, longitude = my.longitude)</code>. The daylight
estimation, which is valid for dates between 1901 and 2099, is made using the
measurement location, date, time and astronomical algorithms to estimate the
relative positions of the Sun and the measurement location on the Earth's
surface, and is based on NOAA methods. Measurement location should be set
using <code>latitude</code> (+ to North; - to South) and <code>longitude</code> (+ to
East; - to West).</p>
<p>"dst" will split the data by hours that are in daylight saving time (DST) and
hours that are not for appropriate time zones. The option "dst" also requires
that the local time zone is given e.g. <code>local.tz = "Europe/London"</code>,
<code>local.tz = "America/New_York"</code>. Each of the two periods will be in
<em>local time</em>. The main purpose of this option is to test whether there
is a shift in the diurnal profile when DST and non-DST hours are compared.
This option is particularly useful with the <code>timeVariation</code> function.
For example, close to the source of road vehicle emissions, `rush-hour' will
tend to occur at the same <em>local time</em> throughout the year e.g. 8 am and
5 pm. Therefore, comparing non-DST hours with DST hours will tend to show
similar diurnal patterns (at least in the timing of the peaks, if not
magnitude) when expressed in local time. By contrast a variable such as wind
speed or temperature should show a clear shift when expressed in local time.
In essence, this option when used with <code>timeVariation</code> may help
determine whether the variation in a pollutant is driven by man-made
emissions or natural processes.</p>
<p>"wd" splits the data by 8 wind sectors and requires a column <code>wd</code>: "NE",
"E", "SE", "S", "SW", "W", "NW", "N".</p>
<p>"ws" splits the data by 8 quantiles of wind speed and requires a column
<code>ws</code>.</p>
<p>"site" splits the data by site and therefore requires a column <code>site</code>.</p>
<p>Note that all the date-based types e.g. month/year are derived from a column
<code>date</code>. If a user already has a column with a name of one of the
date-based types it will not be used.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>David Carslaw (cutData) and Karl Ropkins (cutDaylight)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## split data by day of the week</span></span></span>
<span class="r-in"><span><span class="va">mydata</span> <span class="op">&lt;-</span> <span class="fu">cutData</span><span class="op">(</span><span class="va">mydata</span>, type <span class="op">=</span> <span class="st">"weekday"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by David Carslaw, Jack Davison, Karl Ropkins.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

