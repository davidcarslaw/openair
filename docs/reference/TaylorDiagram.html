<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Taylor Diagram for model evaluation with conditioning — TaylorDiagram • openair</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Taylor Diagram for model evaluation with conditioning — TaylorDiagram" />
<meta property="og:description" content="Function to draw Taylor Diagrams for model evaluation. The function allows
conditioning by any categorical or numeric variables, which makes the
function very flexible." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">openair</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.8-6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/davidcarslaw/openair">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Taylor Diagram for model evaluation with conditioning</h1>
    <small class="dont-index">Source: <a href='https://github.com/davidcarslaw/openair/blob/master/R/TaylorDiagram.R'><code>R/TaylorDiagram.R</code></a></small>
    <div class="hidden name"><code>TaylorDiagram.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function to draw Taylor Diagrams for model evaluation. The function allows
conditioning by any categorical or numeric variables, which makes the
function very flexible.</p>
    </div>

    <pre class="usage"><span class='fu'>TaylorDiagram</span><span class='op'>(</span>
  <span class='va'>mydata</span>,
  obs <span class='op'>=</span> <span class='st'>"obs"</span>,
  mod <span class='op'>=</span> <span class='st'>"mod"</span>,
  group <span class='op'>=</span> <span class='cn'>NULL</span>,
  type <span class='op'>=</span> <span class='st'>"default"</span>,
  normalise <span class='op'>=</span> <span class='cn'>FALSE</span>,
  cols <span class='op'>=</span> <span class='st'>"brewer1"</span>,
  rms.col <span class='op'>=</span> <span class='st'>"darkgoldenrod"</span>,
  cor.col <span class='op'>=</span> <span class='st'>"black"</span>,
  arrow.lwd <span class='op'>=</span> <span class='fl'>3</span>,
  annotate <span class='op'>=</span> <span class='st'>"centred\nRMS error"</span>,
  key <span class='op'>=</span> <span class='cn'>TRUE</span>,
  key.title <span class='op'>=</span> <span class='va'>group</span>,
  key.columns <span class='op'>=</span> <span class='fl'>1</span>,
  key.pos <span class='op'>=</span> <span class='st'>"right"</span>,
  strip <span class='op'>=</span> <span class='cn'>TRUE</span>,
  auto.text <span class='op'>=</span> <span class='cn'>TRUE</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>mydata</th>
      <td><p>A data frame minimally containing a column of observations
and a column of predictions.</p></td>
    </tr>
    <tr>
      <th>obs</th>
      <td><p>A column of observations with which the predictions (<code>mod</code>)
will be compared.</p></td>
    </tr>
    <tr>
      <th>mod</th>
      <td><p>A column of model predictions. Note, <code>mod</code> can be
of length 2 i.e. two lots of model predictions. If two sets of
predictions are are present e.g. <code>mod = c("base",
"revised")</code>, then arrows are shown on the Taylor Diagram which
show the change in model performance in going from the first to
the second. This is useful where, for example, there is interest
in comparing how one model run compares with another using
different assumptions e.g. input data or model set up. See
examples below.</p></td>
    </tr>
    <tr>
      <th>group</th>
      <td><p>The <code>group</code> column is used to differentiate between
  different models and can be a factor or character. The total number of
  models compared will be equal to the number of unique values of
  <code>group</code>.</p>
<p><code>group</code> can also be of length two e.g. <code>group =
c("model", "site")</code>. In this case all model-site combinations will
be shown but they will only be differentiated by colour/symbol by
the first grouping variable ("model" in this case). In essence the
plot removes the differentiation by the second grouping
variable. Because there will be different values of <code>obs</code> for
each group, <code>normalise = TRUE</code> should be used.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p><code>type</code> determines how the data are split
i.e. conditioned, and then plotted. The default is will produce a
single plot using the entire data. Type can be one of the built-in
types as detailed in <code>cutData</code> e.g. &#8220;season&#8221;, &#8220;year&#8221;,
&#8220;weekday&#8221; and so on. For example, <code>type = "season"</code> will
produce four plots --- one for each season.</p>
<p>It is also possible to choose <code>type</code> as another variable in
the data frame. If that variable is numeric, then the data will be
split into four quantiles (if possible) and labelled
accordingly. If type is an existing character or factor variable,
then those categories/levels will be used directly. This offers
great flexibility for understanding the variation of different
variables and how they depend on one another.</p>
<p>Type can be up length two e.g. <code>type = c("season",
"weekday")</code> will produce a 2x2 plot split by season and day of the
week. Note, when two types are provided the first forms the
columns and the second the rows.</p>
<p>Note that often it will make sense to use <code>type = "site"</code>
when multiple sites are available. This will ensure that each
panel contains data specific to an individual site.</p></td>
    </tr>
    <tr>
      <th>normalise</th>
      <td><p>Should the data be normalised by dividing the
standard deviation of the observations? The statistics can be
normalised (and non-dimensionalised) by dividing both the RMS
difference and the standard deviation of the <code>mod</code> values by
the standard deviation of the observations (<code>obs</code>). In this
case the &#8220;observed&#8221; point is plotted on the x-axis at unit
distance from the origin. This makes it possible to plot
statistics for different species (maybe with different units) on
the same plot. The normalisation is done by each
<code>group</code>/<code>type</code> combination.</p></td>
    </tr>
    <tr>
      <th>cols</th>
      <td><p>Colours to be used for plotting. Useful options for
categorical data are avilable from <code>RColorBrewer</code> colours ---
see the <code>openair</code> <code>openColours</code> function for more
details. Useful schemes include &#8220;Accent&#8221;, &#8220;Dark2&#8221;,
&#8220;Paired&#8221;, &#8220;Pastel1&#8221;, &#8220;Pastel2&#8221;,
&#8220;Set1&#8221;, &#8220;Set2&#8221;, &#8220;Set3&#8221; --- but see
?<code>brewer.pal</code> for the maximum useful colours in each. For
user defined the user can supply a list of colour names recognised
by R (type <code><a href='https://rdrr.io/r/grDevices/colors.html'>colours()</a></code> to see the full list). An example
would be <code>cols = c("yellow", "green", "blue")</code>.</p></td>
    </tr>
    <tr>
      <th>rms.col</th>
      <td><p>Colour for centred-RMS lines and text.</p></td>
    </tr>
    <tr>
      <th>cor.col</th>
      <td><p>Colour for correlation coefficient lines and text.</p></td>
    </tr>
    <tr>
      <th>arrow.lwd</th>
      <td><p>Width of arrow used when used for comparing two model outputs.</p></td>
    </tr>
    <tr>
      <th>annotate</th>
      <td><p>Annotation shown for RMS error.</p></td>
    </tr>
    <tr>
      <th>key</th>
      <td><p>Should the key be shown?</p></td>
    </tr>
    <tr>
      <th>key.title</th>
      <td><p>Title for the key.</p></td>
    </tr>
    <tr>
      <th>key.columns</th>
      <td><p>Number of columns to be used in the key. With many
pollutants a single column can make to key too wide. The user can thus
choose to use several columns by setting <code>columns</code> to be less than
the number of pollutants.</p></td>
    </tr>
    <tr>
      <th>key.pos</th>
      <td><p>Position of the key e.g. &#8220;top&#8221;,
&#8220;bottom&#8221;, &#8220;left&#8221; and &#8220;right&#8221;. See details in
<code>lattice:xyplot</code> for more details about finer control.</p></td>
    </tr>
    <tr>
      <th>strip</th>
      <td><p>Should a strip be shown?</p></td>
    </tr>
    <tr>
      <th>auto.text</th>
      <td><p>Either <code>TRUE</code> (default) or <code>FALSE</code>. If
<code>TRUE</code> titles and axis labels will automatically try and format
pollutant names and units properly e.g.  by subscripting the `2' in NO2.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Other graphical parameters are passed onto
<code>cutData</code> and <code>lattice:xyplot</code>. For example,
<code>TaylorDiagram</code> passes the option <code>hemisphere =
"southern"</code> on to <code>cutData</code> to provide southern (rather than
default northern) hemisphere handling of <code>type = "season"</code>.
Similarly, common graphical parameters, such as <code>layout</code> for
panel arrangement and <code>pch</code> and <code>cex</code> for plot symbol
type and size, are passed on to <code>xyplot</code>. Most are passed
unmodified, although there are some special cases where
<code>openair</code> may locally manage this process. For example,
common axis and title labelling options (such as <code>xlab</code>,
<code>ylab</code>, <code>main</code>) are passed via <code>quickText</code> to
handle routine formatting.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>As well as generating the plot itself, <code>TaylorDiagram</code> also
  returns an object of class ``openair''. The object includes three main
  components: <code>call</code>, the command used to generate the plot;
  <code>data</code>, the data frame of summarised information used to make the
  plot; and <code>plot</code>, the plot itself. If retained, e.g. using
  <code>output &lt;- TaylorDiagram(thedata, obs = "nox", mod = "mod")</code>, this
  output can be used to recover the data, reproduce or rework the original
  plot or undertake further analysis. For example, <code>output$data</code> will
  be a data frame consisting of the group, type, correlation coefficient
  (R), the standard deviation of the observations and measurements.</p>
<p>An openair output can be manipulated using a number of generic operations,
  including <code>print</code>, <code>plot</code> and <code>summary</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The Taylor Diagram is a very useful model evaluation tool. 
The diagram provides a way of showing how three complementary model
performance statistics vary simultaneously. These statistics are the
correlation coefficient R, the standard deviation (sigma) and the (centred)
root-mean-square error. These three statistics can be plotted on one (2D)
graph because of the way they are related to one another which can be
represented through the Law of Cosines.</p>
<p>The <code>openair</code> version of the Taylor Diagram has several
enhancements that increase its flexibility. In particular, the
straightforward way of producing conditioning plots should prove
valuable under many circumstances (using the <code>type</code>
option). Many examples of Taylor Diagrams focus on
model-observation comparisons for several models using all the
available data. However, more insight can be gained into model
performance by partitioning the data in various ways e.g. by
season, daylight/nighttime, day of the week, by levels of a
numeric variable e.g. wind speed or by land-use type etc.</p>
<p>To consider several pollutants on one plot, a column identifying
the pollutant name can be used e.g. <code>pollutant</code>. Then the
Taylor Diagram can be plotted as (assuming a data frame
<code>thedata</code>):</p>
<p><code>TaylorDiagram(thedata, obs = "obs", mod = "mod", group = "model", type = "pollutant")</code></p>
<p>which will give the model performance by pollutant in each panel.</p>
<p>Note that it is important that each panel represents data with the
same mean observed data across different groups. Therefore
<code>TaylorDiagram(mydata, group = "model", type = "season")</code> is
OK, whereas <code>TaylorDiagram(mydata, group = "season", type =
"model")</code> is not because each panel (representing a model) will
have four different mean values --- one for each
season. Generally, the option <code>group</code> is either missing (one
model being evaluated) or represents a column giving the model
name. However, the data can be normalised using the
<code>normalise</code> option. Normalisation is carried out on a per
<code>group</code>/<code>type</code> basis making it possible to compare data
on different scales e.g. <code>TaylorDiagram(mydata, group =
"season", type = "model", normalise = TRUE)</code>. In this way it is
possible to compare different pollutants, sites etc. in the same
panel.</p>
<p>Also note that if multiple sites are present it makes sense to use
<code>type = "site"</code> to ensure that each panel represents an
individual site with its own specific standard deviation etc. If
this is not the case then select a single site from the data first
e.g. <code>subset(mydata, site == "Harwell")</code>.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Taylor, K.E.: Summarizing multiple aspects of model performance in a single
  diagram. J.  Geophys. Res., 106, 7183-7192, 2001 (also see PCMDI Report
  55).</p>
<p>IPCC, 2001: Climate Change 2001: The Scientific Basis, Contribution of
  Working Group I to the Third Assessment Report of the Intergovernmental
  Panel on Climate Change [Houghton, J.T., Y. Ding, D.J. Griggs, M. Noguer,
  P.J. van der Linden, X. Dai, K. Maskell, and C.A.  Johnson (eds.)].
  Cambridge University Press, Cambridge, United Kingdom and New York, NY,
  USA, 881 pp.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code>taylor.diagram</code> from the <code>plotrix</code> package from which
  some of the annotation code was used.</p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>David Carslaw</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span class='co'>## in the examples below, most effort goes into making some artificial data</span></span>
<span class='r-in'><span class='co'>## the function itself can be run very simply</span></span>
<span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'><span class='co'>## dummy model data for 2003</span></span>
<span class='r-in'><span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='selectByDate.html'>selectByDate</a></span><span class='op'>(</span><span class='va'>mydata</span>, year <span class='op'>=</span> <span class='fl'>2003</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>date <span class='op'>=</span> <span class='va'>mydata</span><span class='op'>$</span><span class='va'>date</span>, obs <span class='op'>=</span> <span class='va'>mydata</span><span class='op'>$</span><span class='va'>nox</span>, mod <span class='op'>=</span> <span class='va'>mydata</span><span class='op'>$</span><span class='va'>nox</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## now make mod worse by adding bias and noise according to the month</span></span>
<span class='r-in'><span class='co'>## do this for 3 different models</span></span>
<span class='r-in'><span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/transform.html'>transform</a></span><span class='op'>(</span><span class='va'>dat</span>, month <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/format.html'>format</a></span><span class='op'>(</span><span class='va'>date</span>, <span class='st'>"%m"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>mod1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/transform.html'>transform</a></span><span class='op'>(</span><span class='va'>dat</span>, mod <span class='op'>=</span> <span class='va'>mod</span> <span class='op'>+</span> <span class='fl'>10</span> <span class='op'>*</span> <span class='va'>month</span> <span class='op'>+</span> <span class='fl'>10</span> <span class='op'>*</span> <span class='va'>month</span> <span class='op'>*</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>)</span><span class='op'>)</span>,</span>
<span class='r-in'>model <span class='op'>=</span> <span class='st'>"model 1"</span><span class='op'>)</span></span>
<span class='r-in'><span class='co'>## lag the results for mod1 to make the correlation coefficient worse</span></span>
<span class='r-in'><span class='co'>## without affecting the sd</span></span>
<span class='r-in'><span class='va'>mod1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/transform.html'>transform</a></span><span class='op'>(</span><span class='va'>mod1</span>, mod <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='va'>mod</span><span class='op'>[</span><span class='fl'>5</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>mod</span><span class='op'>)</span><span class='op'>]</span>, <span class='va'>mod</span><span class='op'>[</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>mod</span><span class='op'>)</span> <span class='op'>-</span> <span class='fl'>3</span><span class='op'>)</span> <span class='op'>:</span></span>
<span class='r-in'><span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>mod</span><span class='op'>)</span><span class='op'>]</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## model 2</span></span>
<span class='r-in'><span class='va'>mod2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/transform.html'>transform</a></span><span class='op'>(</span><span class='va'>dat</span>, mod <span class='op'>=</span> <span class='va'>mod</span> <span class='op'>+</span> <span class='fl'>7</span> <span class='op'>*</span> <span class='va'>month</span> <span class='op'>+</span> <span class='fl'>7</span> <span class='op'>*</span> <span class='va'>month</span> <span class='op'>*</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>)</span><span class='op'>)</span>,</span>
<span class='r-in'>model <span class='op'>=</span> <span class='st'>"model 2"</span><span class='op'>)</span></span>
<span class='r-in'><span class='co'>## model 3</span></span>
<span class='r-in'><span class='va'>mod3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/transform.html'>transform</a></span><span class='op'>(</span><span class='va'>dat</span>, mod <span class='op'>=</span> <span class='va'>mod</span> <span class='op'>+</span> <span class='fl'>3</span> <span class='op'>*</span> <span class='va'>month</span> <span class='op'>+</span> <span class='fl'>3</span> <span class='op'>*</span> <span class='va'>month</span> <span class='op'>*</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>)</span><span class='op'>)</span>,</span>
<span class='r-in'>model <span class='op'>=</span> <span class='st'>"model 3"</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='va'>mod.dat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='va'>mod1</span>, <span class='va'>mod2</span>, <span class='va'>mod3</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## basic Taylor plot</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='fu'>TaylorDiagram</span><span class='op'>(</span><span class='va'>mod.dat</span>, obs <span class='op'>=</span> <span class='st'>"obs"</span>, mod <span class='op'>=</span> <span class='st'>"mod"</span>, group <span class='op'>=</span> <span class='st'>"model"</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## Taylor plot by season</span></span>
<span class='r-in'><span class='fu'>TaylorDiagram</span><span class='op'>(</span><span class='va'>mod.dat</span>, obs <span class='op'>=</span> <span class='st'>"obs"</span>, mod <span class='op'>=</span> <span class='st'>"mod"</span>, group <span class='op'>=</span> <span class='st'>"model"</span>, type <span class='op'>=</span> <span class='st'>"season"</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## now show how to evaluate model improvement (or otherwise)</span></span>
<span class='r-in'><span class='va'>mod1a</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/transform.html'>transform</a></span><span class='op'>(</span><span class='va'>dat</span>, mod <span class='op'>=</span> <span class='va'>mod</span> <span class='op'>+</span> <span class='fl'>2</span> <span class='op'>*</span> <span class='va'>month</span> <span class='op'>+</span> <span class='fl'>2</span> <span class='op'>*</span> <span class='va'>month</span> <span class='op'>*</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>)</span><span class='op'>)</span>,</span>
<span class='r-in'>model <span class='op'>=</span> <span class='st'>"model 1"</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>mod2a</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/transform.html'>transform</a></span><span class='op'>(</span><span class='va'>mod2</span>, mod <span class='op'>=</span> <span class='va'>mod</span> <span class='op'>*</span> <span class='fl'>1.3</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>mod3a</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/transform.html'>transform</a></span><span class='op'>(</span><span class='va'>dat</span>, mod <span class='op'>=</span> <span class='va'>mod</span> <span class='op'>+</span> <span class='fl'>10</span> <span class='op'>*</span> <span class='va'>month</span> <span class='op'>+</span> <span class='fl'>10</span> <span class='op'>*</span> <span class='va'>month</span> <span class='op'>*</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>dat</span><span class='op'>)</span><span class='op'>)</span>,</span>
<span class='r-in'>model <span class='op'>=</span> <span class='st'>"model 3"</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>mod.dat2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='va'>mod1a</span>, <span class='va'>mod2a</span>, <span class='va'>mod3a</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>mod.dat</span><span class='op'>$</span><span class='va'>mod2</span> <span class='op'>&lt;-</span> <span class='va'>mod.dat2</span><span class='op'>$</span><span class='va'>mod</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## now we have a data frame with 3 models, 1 set of observations</span></span>
<span class='r-in'><span class='co'>## and TWO sets of model predictions (mod and mod2)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## do for all models</span></span>
<span class='r-in'><span class='fu'>TaylorDiagram</span><span class='op'>(</span><span class='va'>mod.dat</span>, obs <span class='op'>=</span> <span class='st'>"obs"</span>, mod <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"mod"</span>, <span class='st'>"mod2"</span><span class='op'>)</span>, group <span class='op'>=</span> <span class='st'>"model"</span><span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'><span class='co'>## all models, by season</span></span>
<span class='r-in'><span class='fu'>TaylorDiagram</span><span class='op'>(</span><span class='va'>mod.dat</span>, obs <span class='op'>=</span> <span class='st'>"obs"</span>, mod <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"mod"</span>, <span class='st'>"mod2"</span><span class='op'>)</span>, group <span class='op'>=</span> <span class='st'>"model"</span>,</span>
<span class='r-in'>type <span class='op'>=</span> <span class='st'>"season"</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>## consider two groups (model/month). In this case all months are shown by model</span></span>
<span class='r-in'><span class='co'>## but are only differentiated by model.</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='fu'>TaylorDiagram</span><span class='op'>(</span><span class='va'>mod.dat</span>, obs <span class='op'>=</span> <span class='st'>"obs"</span>, mod <span class='op'>=</span> <span class='st'>"mod"</span>, group <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"model"</span>, <span class='st'>"month"</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-in'></span>
<span class='r-in'></span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David Carslaw, Karl Ropkins.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


